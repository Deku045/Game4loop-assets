<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <title>Game4Loop</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Base */
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #0f0f0f;
      color: #fff;
      overflow-x: hidden;
    }

    /* Header */
    header {
      background: #1a1a1a;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
    }
    header h1 {
      margin: 0;
      font-size: 1.8em;
    }
    .lang-toggle,
    .menu-toggle {
      cursor: pointer;
      font-size: 1.5em;
    }

    /* Search Bar */
    .search-bar {
      margin: 20px auto;
      text-align: center;
    }
    .search-bar input {
      padding: 10px;
      width: 80%;
      max-width: 400px;
      border-radius: 5px;
      border: none;
      font-size: 1em;
    }

    /* Grid of Games */
    .games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      padding: 20px;
    }
    .game-card {
      background: #1e1e1e;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      transition: background 0.3s;
    }
    .game-card:hover {
      background: #292929;
    }
    .game-thumb {
      width: 100%;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    .game-title {
      font-size: 1.1em;
      margin: 10px 0;
    }
    .play-btn {
      display: inline-block;
      padding: 8px 12px;
      background: #ff5722;
      color: #fff;
      border-radius: 5px;
      text-decoration: none;
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 0;
      left: -250px;
      width: 250px;
      height: 100%;
      background: #1a1a1a;
      padding: 20px;
      transition: left 0.3s;
      z-index: 1000;
    }
    .sidebar.active {
      left: 0;
    }
    .sidebar h2 {
      margin-top: 0;
      font-size: 1.4em;
    }
    .sidebar a {
      display: block;
      margin: 10px 0;
      color: #fff;
      text-decoration: none;
    }

    /* Overlay */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      z-index: 999;
    }
    .overlay.active {
      display: block;
    }

    /* RTL support tweaks */
    [dir="rtl"] .search-bar input {
      direction: rtl;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="menu-toggle" onclick="toggleSidebar()">â˜°</div>
    <h1 id="site-title">ğŸ® Game4Loop</h1>
    <div class="lang-toggle" onclick="toggleLang()">ğŸŒ</div>
  </header>

  <!-- Search -->
  <div class="search-bar">
    <input
      type="text"
      id="searchInput"
      placeholder="Search for a game or genre"
      oninput="filterGames()"
    />
  </div>

  <!-- Games Grid -->
  <div class="games-grid" id="gamesContainer"></div>

  <!-- Sidebar Menu -->
  <div class="sidebar" id="sidebar">
    <h2 id="menu-title">Menu</h2>
    <a href="#">ğŸ  Home</a>
    <a href="#">ğŸ”¥ Popular</a>
    <a href="#">ğŸ§© Puzzle</a>
    <a href="#">ğŸ¯ Action</a>
    <a href="#">âš™ï¸ Settings</a>
  </div>
  <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

  <!-- Script -->
  <script>
    let lang = 'en';
    let allGames = [];

    const translations = {
      en: {
        title: "ğŸ® Game4Loop",
        search: "Search for a game or genre",
        play: "Play Now",
        menu: "Menu"
      },
      ar: {
        title: "ğŸ® Ø¬ÙŠÙ… ÙÙˆØ± Ù„ÙˆØ¨",
        search: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ù„Ø¹Ø¨Ø© Ø£Ùˆ Ù†ÙˆØ¹",
        play: "Ø§Ù„Ø¹Ø¨ Ø§Ù„Ø¢Ù†",
        menu: "Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"
      }
    };

    function toggleLang() {
      lang = (lang === 'en') ? 'ar' : 'en';
      document.documentElement.lang = lang;
      document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';

      document.getElementById('site-title').textContent = translations[lang].title;
      document.getElementById('searchInput').placeholder = translations[lang].search;
      document.getElementById('menu-title').textContent = translations[lang].menu;

      renderGames(allGames);
    }

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
      document.getElementById('overlay').classList.toggle('active');
    }

    async function fetchGames() {
      try {
        const res = await fetch("https://gamemonetize.com/feed.php?format=0&num=50&page=1");
        const data = await res.json();
        allGames = data;
        renderGames(data);
      } catch (err) {
        console.error("Failed to fetch games:", err);
      }
    }

    function renderGames(games) {
      const container = document.getElementById('gamesContainer');
      container.innerHTML = "";

      if (!games || games.length === 0) {
        container.innerHTML = "<p style='text-align:center;'>No games found.</p>";
        return;
      }

      games.forEach(game => {
        const card = document.createElement('div');
        card.className = "game-card";
        card.innerHTML = `
          <img src="${game.thumb}" alt="${game.title}" class="game-thumb">
          <div class="game-title">${game.title}</div>
          <a href="${game.url}" target="_blank" class="play-btn">
            ${translations[lang].play}
          </a>
        `;
        container.appendChild(card);
      });
    }

    function filterGames() {
      const query = document.getElementById('searchInput').value.toLowerCase().trim();
      const filtered = allGames.filter(game => {
        const title = game.title.toLowerCase();
        const category = (game.category || "").toLowerCase();
        return title.includes(query) || category.includes(query);
      });
      renderGames(filtered);
    }

    // Initial load
    fetchGames();
  </script>

</body>
</html>
