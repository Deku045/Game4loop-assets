<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Game4Loop - ÿ£ŸÑÿπÿßÿ® ŸÖÿ¨ÿßŸÜŸäÿ©</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
    .controls { margin-bottom: 20px; display: flex; gap: 10px; }
    #searchInput { padding: 8px; width: 300px; }
    .game-card { background: #fff; border-radius: 8px; padding: 10px; margin: 10px; width: 200px; box-shadow: 0 0 5px #ccc; text-align: center; }
    .game-thumb { width: 100%; border-radius: 5px; }
    .game-title { font-weight: bold; margin: 10px 0; }
    .play-btn { display: inline-block; padding: 6px 12px; background: #007bff; color: #fff; border-radius: 4px; text-decoration: none; }
    #gamesContainer { display: flex; flex-wrap: wrap; gap: 10px; }
  </style>
</head>
<body>

  <div class="controls">
    <input type="text" id="searchInput" placeholder="Search for a game or genre" oninput="filterGames()">
    <button onclick="toggleLang()">üåê Toggle Language</button>
  </div>

  <div id="gamesContainer"></div>

  <script>
    let lang = 'en';
    let allGames = [];

    const translations = {
      en: {
        play: "Play Now",
        search: "Search for a game or genre"
      },
      ar: {
        play: "ÿßŸÑÿπÿ® ÿßŸÑÿ¢ŸÜ",
        search: "ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ŸÑÿπÿ®ÿ© ÿ£Ÿà ŸÜŸàÿπ"
      }
    };

    async function fetchGamesXML() {
      try {
        const res = await fetch("https://gamemonetize.com/feed.php?format=0&num=50&page=1");
        const text = await res.text();
        const parser = new DOMParser();
        const xml = parser.parseFromString(text, "application/xml");
        const items = xml.querySelectorAll("item");

        allGames = Array.from(items).map(item => ({
          title: item.querySelector("title")?.textContent || "Untitled",
          url: item.querySelector("link")?.textContent || "#",
          thumb: item.querySelector("thumbnail")?.textContent || "",
          category: item.querySelector("category")?.textContent || ""
        }));

        renderGames(allGames);
      } catch (err) {
        console.error("Failed to fetch XML games:", err);
      }
    }

    function renderGames(games) {
      const container = document.getElementById('gamesContainer');
      container.innerHTML = "";

      games.forEach(game => {
        const card = document.createElement('div');
        card.className = "game-card";
        card.innerHTML = `
          <img src="${game.thumb}" alt="${game.title}" class="game-thumb">
          <div class="game-title">${game.title}</div>
          <a href="${game.url}" target="_blank" class="play-btn">
            ${translations[lang].play}
          </a>
        `;
        container.appendChild(card);
      });
    }

    function filterGames() {
      const query = document.getElementById('searchInput').value.toLowerCase().trim();
      const filtered = allGames.filter(game =>
        game.title.toLowerCase().includes(query) ||
        game.category.toLowerCase().includes(query)
      );
      renderGames(filtered);
    }

    function toggleLang() {
      lang = lang === 'en' ? 'ar' : 'en';
      document.documentElement.lang = lang;
      document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
      document.getElementById('searchInput').placeholder = translations[lang].search;
      renderGames(allGames);
    }

    fetchGamesXML();
  </script>

</body>
</html>
